[TOC]

## 01 | 高并发系统：通用设计方法

-   归纳起来共有三种方法：
    -   Scale-out(横向扩展)：分而治之是一种常见的高并发系统的设计方法，采用分布式部署的方式把流量分流开，让每个服务器承担一部分并发和流量。
    -   缓存：使用缓存来提高系统的性能。
    -   异步：可以在单位时间内处理更多的请求。

### Scale-up vs Scale-out

-   Scale-up（纵向扩展）：通过购买性能更好的硬件来提升系统的并发处理能力。
-   Scale-out（横向扩展）：通过将多个低性能的机器组成一个分布式集群来共同抵御高并发流程的冲击。

#### 什么时间选择 Scale-up，什么时候选择 Scale-out ?

-   一般来说，系统设计的初期会考虑使用 Scale-up 方式，因为这种方案足够简单，所谓，能用堆硬件来解决的问题就用硬件来解决。但，当系统并发超过单机的极限时，我们就使用 Scale-out 的方式。
-   Scale-out 虽然能突破单机的限制，但也会引入一些复杂的问题。如整体可用性、一致性、无感知的删除增加节点。

### 缓存

-   缓存的主要作用是提升系统的访问性能，在高并发的场景下就可以支持更多用户的同时访问。
-   整个计算机体系中磁盘是最慢的一环，甚至比其他的组件要慢几个数量级。因此，我们常用内存作为存储介质的缓存，以此提升性能。

### 异步处理

-   异步是一种常见的高并发设计方法，我们在很多文章演讲中都能听到这个名词。与之相反的是同步。
-   同步，代表调用方要阻塞等待被调用方中逻辑执行完成。
-   异步，调用方不需要等待方法逻辑执行完成就可以返回执行其他逻辑，在被调用方法执行完毕后再通过回调、事件通知等方式将结果反馈给调用方。

### 系统设计的演进

-   **罗马不是一天建成的，系统的设计也是如此。**
-   我建议一般系统的演进过程就遵循下面的思路：
    -   最简单的系统设计满足业务需求和流程现状，选择最熟悉的技术体系。
    -   随着流量的增加和业务的变化修正架构中存在的问题的点。在这个过程中，选择社区成熟的、团队熟悉的组件帮助我们解决问题，在社区没有合适的解决方案的前提下才会自己造轮子。
    -   当对架构的小修小改无法满足需求时，考虑重构、重写等大的调整方式以解决现有的问题。

-   总结：**高并发系统的演进应该是循序渐进，以解决系统中存在的问题为目的和驱动力的。**

### 课程小结

-   高并发系统设计的三路通用方法：**Scale-out、缓存和异步**。